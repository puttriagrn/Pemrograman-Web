<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delete Product</title>
    <link rel="stylesheet" href="assets/style.css">
    <script>
        // Fungsi untuk menangani penghapusan produk
        async function handleFormSubmit(event) {
            event.preventDefault(); // Cegah reload halaman

            const productCode = document.getElementById('productCode').value.trim();

            if (!productCode) {
                alert('Product Code is required!');
                return;
            }

            try {
                const response = await fetch('http://localhost/modul4/api.php', {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ product_code: productCode }),
                });

                const result = await response.json();
                if (response.ok) {
                    alert('Product deleted successfully!');
                    // Kosongkan input setelah berhasil
                    document.getElementById('productCode').value = '';
                } else {
                    alert(result.error || 'Failed to delete product');
                }
            } catch (error) {
                console.error(error);
                alert('Something went wrong. Please try again.');
            }
        }

        // Tambahkan event listener ke formulir
        window.addEventListener('DOMContentLoaded', () => {
            const form = document.querySelector('form');
            form.addEventListener('submit', handleFormSubmit);
        });
    </script>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="nav-center">
                <a href="index.html">Home</a>
                <a href="addProduct.html">Add Product</a>
                <a href="deleteProduct.html">Delete Product</a>
            </div>
        </div>
    </nav>

    <div class="form-container">
        <h2>Delete Product</h2>
        <form>
            <div class="form-group">
                <label for="productCode">Product Code</label>
                <input type="text" id="productCode" placeholder="Enter product code" required>
            </div>
            <div class="form-group">
                <button type="submit">Delete Product</button>
            </div>
        </form>
    </div>

</body>
</html>
